spring:
  datasource:
    dynamic:
      primary: master
      datasource:
        master:
          # Postgresql连接
          driver-class-name: org.postgresql.Driver
          url: jdbc:postgresql://${DB_HOST:postgresql}:${DB_PORT:5432}/dax-pay-dev?serverTimezone=Asia/Shanghai&autoReconnect=true&reWriteBatchedInserts=true
          username: ${DB_USER:bootx}
          password: ${DB_PASSWORD:bootx123}
          # MySQL连接
#          driver-class-name: com.mysql.cj.jdbc.Driver
#          url: jdbc:mysql://${DB_HOST:mysql}:${DB_PORT:3306}/dax-pay-dev?serverTimezone=GMT%2B8&characterEncoding=utf8&allowMultiQueries=true&useSSL=false&nullCatalogMeansCurrent=true
#          username: ${DB_USER:root}
#          password: ${DB_PASSWORD:bootx123}
      hikari:
        minimumIdle: 5 # 最小连接数
        maximumPoolSize: 50 # 最大连接数
        leak-detection-threshold: 5000 # 检测连接泄漏的时间阈值（毫秒）
        connection-timeout: 30000 # 获取连接超时时间（毫秒）
        idle-timeout: 600000      # 空闲连接超时时间（毫秒）
        max-lifetime: 1800000     # 连接最大存活时间（毫秒）
  data:
    redis:
      host: redis
      port: 6379
      database: 5
      password: bootx123
      lettuce:
        pool:
          max-wait: 1000ms
# 开发时显示debug日志
logging:
  level:
    cn.bootx.**: debug
    cn.daxpay.**: debug
    org.springframework.jdbc.core: debug
# 接口文档配置
springdoc:
  # 默认展开对象类型的属性, 主要用在get类型的参数中
  default-flat-param-object: true
# 基础脚手架配置
bootx-platform:
  common:
    # swagger相关配置
    swagger:
      author: DaxPay
      title: DaxPay支付平台
      description: DaxPay支付平台-开源版
      version: 0.0.1
      base-packages:
        "[BootxPlatform接口]":
          - cn.bootx.platform.common
          - cn.bootx.platform.starter
          - cn.bootx.platform.iam
          - cn.bootx.platform.baseapi
          - cn.bootx.platform.notice
        "[支付平台接口]":
          - org.dromara.daxpay.controller
        "[支付通道接口]":
          - org.dromara.daxpay.channel
  starter:
    auth:
      enable-admin: true
      ignore-urls:
        - '/actuator/**'
        - '/v3/api-docs/**'
        - '/doc.html'
        - '/swagger-resources/**'
        - '/token/**'
        - '/ws/**'
        - '/demo/**'
        - '/test/**'
        - '/webjars/**'
        - '/front/**'
        - '/h5/**'
        - '/css/**'
        - '/error'
        - '/favicon.ico'
# 支付系统配置
dax-pay:
  # 环境标识
  env: DEV_
  # 通常为两位内 机器码, 用于区分不同机器生成的流水号
  machine-no: 70
dromara:
  x-file-storage:
    default-platform: amazon-s3
    # 文件存储都是用S3协议方式存储
    amazon-s3:
      - platform: amazon-s3 # 存储平台标识
        enable-storage: true  # 启用存储
        access-key: ${OSS_SECRET_ID:lwnS2DEQzveX3fIpRJBP}
        secret-key: ${OSS_SECRET_KEY:LcBdOJzqD57wSXK9hxGlrnCgmojNpWET4I2yaekf}
        end-point: ${OSS_DOMAIN:http://192.168.1.229:9000} #文件存储服务地址, 不要添加/后缀,
        bucket-name: ${OSS_BUKET:daxpay} # 桶名称，不要添加/后缀
        base-path: file/ # 基础路径, 不要添加/前缀, 但需要添加/后缀
        region: ${OSS_REGION:''}
        attr:
          # 开启路径样式访问, 不配置默认为二级域名方式
          forcePathStyle: true

